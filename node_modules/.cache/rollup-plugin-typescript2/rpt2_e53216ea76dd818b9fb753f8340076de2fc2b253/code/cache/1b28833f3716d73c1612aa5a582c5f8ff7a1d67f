{"code":"import { Dic } from \"./enum\";\r\nclass Storage {\r\n    set(key, value, expire = Dic.forever) {\r\n        const data = {\r\n            value,\r\n            [Dic.expire]: expire\r\n        };\r\n        localStorage.setItem(key, JSON.stringify(data));\r\n    }\r\n    get(key) {\r\n        const value = localStorage.getItem(key);\r\n        if (value) {\r\n            const data = JSON.parse(value);\r\n            const now = new Date().getTime();\r\n            //判断有没有过期\r\n            if (typeof data[Dic.expire] === 'number' && now > data[Dic.expire]) {\r\n                this.remove(key);\r\n                return {\r\n                    message: `[storage warning]: ${key}已过期`,\r\n                    value: null\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    message: 'success',\r\n                    value: data.value\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            return {\r\n                message: \"[storage warning] 值无效\",\r\n                value: null\r\n            };\r\n        }\r\n    }\r\n    remove(key) {\r\n        localStorage.removeItem(key);\r\n    }\r\n    clear() {\r\n        localStorage.clear();\r\n    }\r\n}\r\nexport default Storage;\r\n","references":["/Users/zhukai/Desktop/code/study/storage/src/type/index.ts","/Users/zhukai/Desktop/code/study/storage/src/enum/index.ts"]}
